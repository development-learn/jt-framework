# V2019

## 消息结构

标识位        |消息头        |消息体        |校验码        |标识位
------------|-----------|-----------|-----------|------
1byte(0x7e)    |16byte        |			|1byte        |1byte(0x7e)

## 消息头

- `非分包消息` 的消息头长度为 `17字节`
- `分包消息` 的消息头长度为 `21字节`

消息头的结构如下所示：

```sh
消息ID[0-2)	消息体属性[2-4)	协议版本号[4]   终端手机号[5-15)	消息流水号[15-17)	消息包封装项[17-21)

byte[0-2) 	消息ID word(16)
byte[2-4) 	消息体属性 word(16)
		bit[0-10)	消息体长度
		bit[10-13)	数据加密方式
						此三位都为 0,表示消息体不加密
						第 10 位为 1,表示消息体经过 RSA 算法加密
						其它保留
		bit[13]		分包
						1: 消息体卫长消息,进行分包发送处理,具体分包信息由消息包封装项决定
						0: 则消息头中无消息包封装项字段
		bit[14]	    版本标识
		bit[15]	保留
byte[4]     协议版本号
byte[5-15) 	终端手机号或设备ID bcd[10]
		根据安装后终端自身的手机号转换
		手机号不足12 位,则在前面补 0
byte[15-17) 	消息流水号 word(16)
		按发送顺序从 0 开始循环累加
byte[17-21) 	消息包封装项
        如果消息体属性中相关标识位确定消息分包处理,则该项有内容
		否则无该项
		byte[0-2)	消息包总数(word(16)) 该消息分包后得总包数
		byte[2-4)	包序号(word(16))  从 1 开始
```

